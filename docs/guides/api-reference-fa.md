# ๐ก ูุฑุฌุน API

ูุณุชูุฏุงุช REST API ุจุฑุง ุณุณุชู ุณูุงุฑุด ุบุฐุง.

## URL ูพุงู

- **ุชูุณุนู:** `http://localhost:8081`
- **ุชููุฏ:** `https://your-domain.com`

## ุงุญุฑุงุฒ ููุช

ุชูุงู endpoint ูุง ุงุญุฑุงุฒ ููุช ุดุฏู ูุงุฒ ุจู JWT token ุฏุฑ header Authorization ุฏุงุฑูุฏ:

```
Authorization: Bearer <jwt_token>
```

---

## Endpoint ูุง ุงุญุฑุงุฒ ููุช

### POST /auth/register
ุซุจุช ูุงู ุญุณุงุจ ฺฉุงุฑุจุฑ ุฌุฏุฏ.

**ุฏุฑุฎูุงุณุช:**
```json
{
  "firstName": "ุนู",
  "lastName": "ุงุญูุฏ", 
  "phone": "09123456789",
  "password": "password123",
  "email": "ali@example.com",
  "role": "CUSTOMER"
}
```

**ูพุงุณุฎ:**
```json
{
  "success": true,
  "message": "ฺฉุงุฑุจุฑ ุจุง ููููุช ุซุจุช ูุงู ุดุฏ",
  "data": {
    "id": 1,
    "phone": "09123456789",
    "role": "CUSTOMER"
  }
}
```

### POST /auth/login
ุงุญุฑุงุฒ ููุช ฺฉุงุฑุจุฑ ู ุฏุฑุงูุช JWT token.

**ุฏุฑุฎูุงุณุช:**
```json
{
  "phone": "09123456789",
  "password": "password123"
}
```

**ูพุงุณุฎ:**
```json
{
  "success": true,
  "message": "ูุฑูุฏ ูููู",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "id": 1,
      "firstName": "ุนู",
      "lastName": "ุงุญูุฏ",
      "phone": "09123456789",
      "role": "CUSTOMER"
    }
  }
}
```

---

## Endpoint ูุง ุฑุณุชูุฑุงู

### GET /restaurants
ุฏุฑุงูุช ููุฑุณุช ุชูุงู ุฑุณุชูุฑุงูโูุง ูุนุงู.

**ูพุงุณุฎ:**
```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "ูพุชุฒุง ูพุงูุงุณ",
      "address": "ุชูุฑุงูุ ุฎุงุจุงู ุงุตู 123",
      "phone": "02112345678",
      "status": "APPROVED",
      "cuisine": "ุงุชุงูุง"
    }
  ]
}
```

### GET /restaurants/{id}
ุฏุฑุงูุช ุฌุฒุฆุงุช ุฑุณุชูุฑุงู ุจุฑ ุงุณุงุณ ID.

**ูพุงุณุฎ:**
```json
{
  "success": true,
  "data": {
    "id": 1,
    "name": "ูพุชุฒุง ูพุงูุงุณ",
    "address": "ุชูุฑุงูุ ุฎุงุจุงู ุงุตู 123",
    "phone": "02112345678",
    "status": "APPROVED",
    "cuisine": "ุงุชุงูุง",
    "description": "ุบุฐุงูุง ุงุตู ุงุชุงูุง"
  }
}
```

### GET /restaurants/{id}/menu
ุฏุฑุงูุช ุขุชูโูุง ููู ุฑุณุชูุฑุงู.

**ูพุงุณุฎ:**
```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "ูพุชุฒุง ูุงุฑฺฏุงุฑุชุง",
      "description": "ฺฏูุฌู ุชุงุฒูุ ูพูุฑ ููุฒุงุฑูุงุ ุฑุญุงู",
      "price": 25000,
      "available": true,
      "category": "ูพุชุฒุง"
    }
  ]
}
```

---

## Endpoint ูุง ุณูุงุฑุด

### POST /orders
ุงุฌุงุฏ ุณูุงุฑุด ุฌุฏุฏ. **ูุงุฒููุฏ ุงุญุฑุงุฒ ููุช.**

**ุฏุฑุฎูุงุณุช:**
```json
{
  "restaurantId": 1,
  "deliveryAddress": "ุชูุฑุงูุ ุฎุงุจุงู ุจููุท 456",
  "deliveryPhone": "09123456789",
  "notes": "ุฏู ุจุงุฑ ุฒูฺฏ ุจุฒูุฏ",
  "items": [
    {
      "foodItemId": 1,
      "quantity": 2
    },
    {
      "foodItemId": 2,
      "quantity": 1
    }
  ]
}
```

**ูพุงุณุฎ:**
```json
{
  "success": true,
  "message": "ุณูุงุฑุด ุจุง ููููุช ุงุฌุงุฏ ุดุฏ",
  "data": {
    "id": 123,
    "trackingCode": "ORD-2024-123",
    "status": "PLACED",
    "totalAmount": 50000,
    "estimatedDeliveryTime": "2024-12-15T19:30:00Z"
  }
}
```

### GET /orders/{id}
ุฏุฑุงูุช ุฌุฒุฆุงุช ุณูุงุฑุด ุจุฑ ุงุณุงุณ ID. **ูุงุฒููุฏ ุงุญุฑุงุฒ ููุช.**

**ูพุงุณุฎ:**
```json
{
  "success": true,
  "data": {
    "id": 123,
    "trackingCode": "ORD-2024-123",
    "status": "CONFIRMED",
    "totalAmount": 50000,
    "deliveryAddress": "ุชูุฑุงูุ ุฎุงุจุงู ุจููุท 456",
    "createdAt": "2024-12-15T18:00:00Z",
    "items": [
      {
        "foodItem": {
          "name": "ูพุชุฒุง ูุงุฑฺฏุงุฑุชุง",
          "price": 25000
        },
        "quantity": 2,
        "subtotal": 50000
      }
    ]
  }
}
```

### GET /orders/user/{userId}
ุฏุฑุงูุช ุณูุงุฑุดโูุง ฺฉุงุฑุจุฑ ูุดุฎุต. **ูุงุฒููุฏ ุงุญุฑุงุฒ ููุช.**

**ูพุงุฑุงูุชุฑูุง Query:**
- `status` (ุงุฎุชุงุฑ): ููุชุฑ ุจุฑ ุงุณุงุณ ูุถุนุช ุณูุงุฑุด
- `page` (ุงุฎุชุงุฑ): ุดูุงุฑู ุตูุญู (ูพุดโูุฑุถ: 0)  
- `size` (ุงุฎุชุงุฑ): ุงูุฏุงุฒู ุตูุญู (ูพุดโูุฑุถ: 10)

**ูพุงุณุฎ:**
```json
{
  "success": true,
  "data": {
    "content": [
      {
        "id": 123,
        "trackingCode": "ORD-2024-123",
        "status": "DELIVERED",
        "totalAmount": 50000,
        "createdAt": "2024-12-15T18:00:00Z"
      }
    ],
    "totalElements": 5,
    "totalPages": 1,
    "size": 10,
    "number": 0
  }
}
```

### PUT /orders/{id}/status
ุจูโุฑูุฒุฑุณุงู ูุถุนุช ุณูุงุฑุด. **ูุงุฒููุฏ ุงุญุฑุงุฒ ููุช (ูุฑูุดูุฏู/ูุฏุฑ).**

**ุฏุฑุฎูุงุณุช:**
```json
{
  "status": "CONFIRMED",
  "notes": "ุณูุงุฑุด ุชุงุฏ ุดุฏุ ุฒูุงู ุชุฎูู ุขูุงุฏูโุณุงุฒ 30 ุฏููู"
}
```

---

## Endpoint ูุง ูพุฑููุงู ฺฉุงุฑุจุฑ

### GET /users/profile
ุฏุฑุงูุช ูพุฑููุงู ฺฉุงุฑุจุฑ ูุนู. **ูุงุฒููุฏ ุงุญุฑุงุฒ ููุช.**

**ูพุงุณุฎ:**
```json
{
  "success": true,
  "data": {
    "id": 1,
    "firstName": "ุนู",
    "lastName": "ุงุญูุฏ",
    "phone": "09123456789",
    "email": "ali@example.com",
    "role": "CUSTOMER",
    "createdAt": "2024-12-01T10:00:00Z"
  }
}
```

### PUT /users/profile
ุจูโุฑูุฒุฑุณุงู ูพุฑููุงู ฺฉุงุฑุจุฑ. **ูุงุฒููุฏ ุงุญุฑุงุฒ ููุช.**

**ุฏุฑุฎูุงุณุช:**
```json
{
  "firstName": "ุนู",
  "lastName": "ูุญูุฏ",
  "email": "alimohammadi@example.com"
}
```

---

## Endpoint ูุง ุขุชู ุบุฐุง

### GET /food-items/search
ุฌุณุชุฌู ุขุชูโูุง ุบุฐุง ุฏุฑ ุชูุงู ุฑุณุชูุฑุงูโูุง.

**ูพุงุฑุงูุชุฑูุง Query:**
- `q`: ุนุจุงุฑุช ุฌุณุชุฌู
- `category` (ุงุฎุชุงุฑ): ููุชุฑ ุจุฑ ุงุณุงุณ ุฏุณุชูโุจูุฏ
- `minPrice` (ุงุฎุชุงุฑ): ููุชุฑ ุญุฏุงูู ููุช
- `maxPrice` (ุงุฎุชุงุฑ): ููุชุฑ ุญุฏุงฺฉุซุฑ ููุช

**ูพุงุณุฎ:**
```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "ูพุชุฒุง ูุงุฑฺฏุงุฑุชุง",
      "description": "ฺฏูุฌู ุชุงุฒูุ ูพูุฑ ููุฒุงุฑูุงุ ุฑุญุงู",
      "price": 25000,
      "restaurant": {
        "id": 1,
        "name": "ูพุชุฒุง ูพุงูุงุณ"
      }
    }
  ]
}
```

---

## Endpoint ูุง ูพุฑุฏุงุฎุช

### POST /payments/process
ูพุฑุฏุงุฒุด ูพุฑุฏุงุฎุช ุจุฑุง ุณูุงุฑุด. **ูุงุฒููุฏ ุงุญุฑุงุฒ ููุช.**

**ุฏุฑุฎูุงุณุช:**
```json
{
  "orderId": 123,
  "paymentMethod": "ONLINE",
  "cardDetails": {
    "cardNumber": "1234567890123456",
    "expiryMonth": 12,
    "expiryYear": 2025,
    "cvv": "123"
  }
}
```

**ูพุงุณุฎ:**
```json
{
  "success": true,
  "message": "ูพุฑุฏุงุฎุช ุจุง ููููุช ุงูุฌุงู ุดุฏ",
  "data": {
    "transactionId": "TXN-2024-456",
    "status": "COMPLETED",
    "amount": 50000
  }
}
```

---

## Endpoint ูุง ูุฏุฑ

### GET /admin/statistics
ุฏุฑุงูุช ุขูุงุฑ ุณุณุชู. **ูุงุฒููุฏ ุงุญุฑุงุฒ ููุช ูุฏุฑ.**

**ูพุงุณุฎ:**
```json
{
  "success": true,
  "data": {
    "totalUsers": 1250,
    "totalRestaurants": 45,
    "totalOrders": 3420,
    "totalRevenue": 125000000,
    "ordersToday": 87,
    "revenueToday": 2150000
  }
}
```

### GET /admin/orders
ุฏุฑุงูุช ุชูุงู ุณูุงุฑุดโูุง ุจุง ููุชุฑ. **ูุงุฒููุฏ ุงุญุฑุงุฒ ููุช ูุฏุฑ.**

**ูพุงุฑุงูุชุฑูุง Query:**
- `status` (ุงุฎุชุงุฑ): ููุชุฑ ุจุฑ ุงุณุงุณ ูุถุนุช
- `restaurantId` (ุงุฎุชุงุฑ): ููุชุฑ ุจุฑ ุงุณุงุณ ุฑุณุชูุฑุงู
- `startDate` (ุงุฎุชุงุฑ): ููุชุฑ ุงุฒ ุชุงุฑุฎ
- `endDate` (ุงุฎุชุงุฑ): ููุชุฑ ุชุง ุชุงุฑุฎ

---

## ุจุฑุฑุณ ุณูุงูุช

### GET /health
ุจุฑุฑุณ ูุถุนุช ุณูุงูุช ุจุฑูุงูู.

**ูพุงุณุฎ:**
```json
{
  "status": "UP",
  "service": "food-ordering-backend",
  "timestamp": "2024-12-15T12:00:00Z",
  "version": "1.0.0"
}
```

---

## ูพุงุณุฎโูุง ุฎุทุง

ุชูุงู endpoint ูุง ุฎุทุงูุง ุฑุง ุฏุฑ ุงู ูุฑูุช ุจุฑูโฺฏุฑุฏุงููุฏ:

```json
{
  "success": false,
  "message": "ุชูุถุญ ุฎุทุง",
  "error": "VALIDATION_ERROR",
  "details": {
    "field": "phone",
    "issue": "ุดูุงุฑู ุชููู ุจุงุฏ 11 ุฑูู ุจุงุดุฏ"
  }
}
```

### ฺฉุฏูุง ูุถุนุช HTTP ุฑุงุฌ

- **200 OK** - ุฏุฑุฎูุงุณุช ูููู
- **201 Created** - ููุจุน ุจุง ููููุช ุงุฌุงุฏ ุดุฏ  
- **400 Bad Request** - ุฏุงุฏูโูุง ูุงูุนุชุจุฑ ุฏุฑุฎูุงุณุช
- **401 Unauthorized** - ุงุญุฑุงุฒ ููุช ููุฑุฏ ูุงุฒ/ูุงูููู
- **403 Forbidden** - ุฏุณุชุฑุณ ูุงฺฉุงู
- **404 Not Found** - ููุจุน ุงูุช ูุดุฏ
- **422 Unprocessable Entity** - ุฎุทุงูุง ุงุนุชุจุงุฑุณูุฌ
- **500 Internal Server Error** - ุฎุทุง ุณุฑูุฑ

---

## ูุญุฏูุฏุช ูุฑุฎ

ุฏุฑุฎูุงุณุชโูุง API ูุญุฏูุฏ ุดุฏูโุงูุฏ ุจู:
- **60 ุฏุฑุฎูุงุณุช ุฏุฑ ุฏููู** ุจุฑุง ูุฑ ุขุฏุฑุณ IP
- **10 ุฏุฑุฎูุงุณุช ุงุญุฑุงุฒ ููุช ุฏุฑ ุฏููู** ุจุฑุง ูุฑ ุขุฏุฑุณ IP
- **30 ุฏุฑุฎูุงุณุช ุณูุงุฑุด ุฏุฑ ุฏููู** ุจุฑุง ูุฑ ฺฉุงุฑุจุฑ ุงุญุฑุงุฒ ููุช ุดุฏู

header ูุง ูุญุฏูุฏุช ูุฑุฎ ุฏุฑ ูพุงุณุฎโูุง ฺฏูุฌุงูุฏู ุดุฏู:
```
X-RateLimit-Limit: 60
X-RateLimit-Remaining: 45
X-RateLimit-Reset: 1640123456
```

---

## ุชุณุช

### ุงุณุชูุงุฏู ุงุฒ curl

**ูุฑูุฏ:**
```bash
curl -X POST http://localhost:8081/auth/login \
  -H "Content-Type: application/json" \
  -d '{"phone":"09123456789","password":"password123"}'
```

**ุฏุฑุงูุช ุฑุณุชูุฑุงูโูุง:**
```bash
curl http://localhost:8081/restaurants
```

**ุงุฌุงุฏ ุณูุงุฑุด (ุจุง ุงุญุฑุงุฒ ููุช):**
```bash
curl -X POST http://localhost:8081/orders \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -d '{"restaurantId":1,"deliveryAddress":"ุขุฏุฑุณ ุชุณุช","items":[{"foodItemId":1,"quantity":2}]}'
```

---

**ูุณุฎู:** 1.0  
**ุขุฎุฑู ุจูโุฑูุฒุฑุณุงู:** ุฏุณุงูุจุฑ 2024 