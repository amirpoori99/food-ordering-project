<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.myapp.ui.auth.UserProfileController">
   <top>
      <VBox>
         <children>
            <MenuBar>
               <menus>
                  <Menu text="فایل">
                     <items>
                        <MenuItem text="خروج از حساب کاربری" />
                        <SeparatorMenuItem />
                        <MenuItem text="بستن" />
                     </items>
                  </Menu>
                  <Menu text="ناوبری">
                     <items>
                        <MenuItem text="صفحه اصلی" />
                        <MenuItem text="لیست رستوران‌ها" />
                        <MenuItem text="سبد خرید" />
                     </items>
                  </Menu>
                  <Menu text="راهنما">
                     <items>
                        <MenuItem text="راهنمای استفاده" />
                        <MenuItem text="درباره ما" />
                     </items>
                  </Menu>
               </menus>
            </MenuBar>
            <HBox alignment="CENTER" spacing="10.0" style="-fx-background-color: #f8f9fa;">
               <children>
                  <Label text="مدیریت پروفایل و تاریخچه کاربر">
                     <font>
                        <Font name="System Bold" size="20.0" />
                     </font>
                  </Label>
               </children>
               <padding>
                  <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
               </padding>
            </HBox>
         </children>
      </VBox>
   </top>
   
   <center>
      <TabPane fx:id="mainTabPane" tabClosingPolicy="UNAVAILABLE">
         <tabs>
            <!-- Profile Tab -->
            <Tab fx:id="profileTab" text="اطلاعات شخصی">
               <content>
                  <ScrollPane fitToWidth="true">
                     <content>
                        <VBox spacing="20.0">
                           <children>
                              <!-- Basic Information Section -->
                              <VBox spacing="10.0" style="-fx-background-color: white; -fx-border-color: #dee2e6; -fx-border-radius: 5; -fx-background-radius: 5;">
                                 <children>
                                    <Label text="اطلاعات پایه">
                                       <font>
                                          <Font name="System Bold" size="16.0" />
                                       </font>
                                    </Label>
                                    <GridPane hgap="15.0" vgap="15.0">
                                       <columnConstraints>
                                          <ColumnConstraints hgrow="NEVER" minWidth="120.0" />
                                          <ColumnConstraints hgrow="ALWAYS" minWidth="250.0" />
                                          <ColumnConstraints hgrow="NEVER" minWidth="120.0" />
                                          <ColumnConstraints hgrow="ALWAYS" minWidth="250.0" />
                                       </columnConstraints>
                                       <children>
                                          <Label text="نام کامل:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                                          <TextField fx:id="fullNameField" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                                          
                                          <Label text="شماره تلفن:" GridPane.columnIndex="2" GridPane.rowIndex="0" />
                                          <TextField fx:id="phoneField" editable="false" style="-fx-background-color: #e9ecef;" GridPane.columnIndex="3" GridPane.rowIndex="0" />
                                          
                                          <Label text="ایمیل:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                                          <TextField fx:id="emailField" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                                          
                                          <Label text="نقش کاربری:" GridPane.columnIndex="2" GridPane.rowIndex="1" />
                                          <Label fx:id="roleLabel" style="-fx-text-fill: #6c757d;" GridPane.columnIndex="3" GridPane.rowIndex="1" />
                                          
                                          <Label text="وضعیت حساب:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                                          <Label fx:id="accountStatusLabel" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                                          
                                          <Label text="تاریخ عضویت:" GridPane.columnIndex="2" GridPane.rowIndex="2" />
                                          <Label fx:id="memberSinceLabel" GridPane.columnIndex="3" GridPane.rowIndex="2" />
                                          
                                          <Label text="موجودی کیف پول:" GridPane.columnIndex="0" GridPane.rowIndex="3" />
                                          <Label fx:id="walletBalanceLabel" style="-fx-font-size: 16; -fx-font-weight: bold; -fx-text-fill: #28a745;" GridPane.columnIndex="1" GridPane.rowIndex="3" />
                                       </children>
                                    </GridPane>
                                    <HBox alignment="CENTER_RIGHT" spacing="10.0">
                                       <children>
                                          <Button fx:id="saveProfileButton" onAction="#handleSaveProfile" style="-fx-background-color: #28a745; -fx-text-fill: white;" text="ذخیره تغییرات" />
                                       </children>
                                    </HBox>
                                 </children>
                                 <padding>
                                    <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                                 </padding>
                              </VBox>
                              
                              <!-- Address Management Section -->
                              <VBox spacing="10.0" style="-fx-background-color: white; -fx-border-color: #dee2e6; -fx-border-radius: 5; -fx-background-radius: 5;">
                                 <children>
                                    <HBox alignment="CENTER_LEFT">
                                       <children>
                                          <Label text="مدیریت آدرس‌ها">
                                             <font>
                                                <Font name="System Bold" size="16.0" />
                                             </font>
                                          </Label>
                                          <Region HBox.hgrow="ALWAYS" />
                                          <Button fx:id="addAddressButton" onAction="#handleAddAddress" style="-fx-background-color: #007bff; -fx-text-fill: white;" text="افزودن آدرس جدید" />
                                       </children>
                                    </HBox>
                                    <ListView fx:id="addressListView" maxHeight="200.0" minHeight="150.0" />
                                    <HBox spacing="10.0">
                                       <children>
                                          <Button fx:id="editAddressButton" disable="true" onAction="#handleEditAddress" style="-fx-background-color: #17a2b8; -fx-text-fill: white;" text="ویرایش" />
                                          <Button fx:id="deleteAddressButton" disable="true" onAction="#handleDeleteAddress" style="-fx-background-color: #dc3545; -fx-text-fill: white;" text="حذف" />
                                       </children>
                                    </HBox>
                                 </children>
                                 <padding>
                                    <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                                 </padding>
                              </VBox>
                              
                              <!-- Password Change Section -->
                              <VBox fx:id="passwordChangeSection" spacing="10.0" style="-fx-background-color: #fff3cd; -fx-border-color: #ffeaa7; -fx-border-radius: 5; -fx-background-radius: 5;">
                                 <children>
                                    <Label text="تغییر رمز عبور">
                                       <font>
                                          <Font name="System Bold" size="16.0" />
                                       </font>
                                    </Label>
                                    <GridPane hgap="15.0" vgap="15.0">
                                       <columnConstraints>
                                          <ColumnConstraints hgrow="NEVER" minWidth="150.0" />
                                          <ColumnConstraints hgrow="ALWAYS" minWidth="300.0" />
                                       </columnConstraints>
                                       <children>
                                          <Label text="رمز عبور فعلی:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                                          <PasswordField fx:id="currentPasswordField" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                                          
                                          <Label text="رمز عبور جدید:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                                          <PasswordField fx:id="newPasswordField" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                                          
                                          <Label text="تکرار رمز عبور جدید:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                                          <PasswordField fx:id="confirmPasswordField" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                                       </children>
                                    </GridPane>
                                    <HBox alignment="CENTER_RIGHT">
                                       <children>
                                          <Button fx:id="changePasswordButton" disable="true" onAction="#handleChangePassword" style="-fx-background-color: #ffc107; -fx-text-fill: #212529;" text="تغییر رمز عبور" />
                                       </children>
                                    </HBox>
                                 </children>
                                 <padding>
                                    <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                                 </padding>
                              </VBox>
                           </children>
                           <padding>
                              <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                           </padding>
                        </VBox>
                     </content>
                  </ScrollPane>
               </content>
            </Tab>
            
            <!-- Orders History Tab -->
            <Tab fx:id="ordersTab" text="تاریخچه سفارشات">
               <content>
                  <VBox spacing="15.0">
                     <children>
                        <!-- Filters Section -->
                        <VBox spacing="10.0" style="-fx-background-color: white; -fx-border-color: #dee2e6; -fx-border-radius: 5; -fx-background-radius: 5;">
                           <children>
                              <Label text="فیلترها">
                                 <font>
                                    <Font name="System Bold" size="14.0" />
                                 </font>
                              </Label>
                              <GridPane hgap="15.0" vgap="10.0">
                                 <columnConstraints>
                                    <ColumnConstraints hgrow="NEVER" minWidth="100.0" />
                                    <ColumnConstraints hgrow="ALWAYS" minWidth="200.0" />
                                    <ColumnConstraints hgrow="NEVER" minWidth="100.0" />
                                    <ColumnConstraints hgrow="ALWAYS" minWidth="200.0" />
                                 </columnConstraints>
                                 <children>
                                    <Label text="جستجو:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                                    <TextField fx:id="orderSearchField" promptText="نام رستوران یا شماره سفارش..." GridPane.columnIndex="1" GridPane.rowIndex="0" GridPane.columnSpan="3" />
                                    
                                    <Label text="وضعیت:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                                    <ComboBox fx:id="orderStatusFilter" maxWidth="Infinity" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                                    
                                    <Label text="از تاریخ:" GridPane.columnIndex="2" GridPane.rowIndex="1" />
                                    <DatePicker fx:id="orderStartDate" maxWidth="Infinity" GridPane.columnIndex="3" GridPane.rowIndex="1" />
                                    
                                    <Label text="تا تاریخ:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                                    <DatePicker fx:id="orderEndDate" maxWidth="Infinity" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                                    
                                    <HBox alignment="CENTER_RIGHT" spacing="10.0" GridPane.columnIndex="2" GridPane.columnSpan="2" GridPane.rowIndex="2">
                                       <children>
                                          <Button fx:id="applyOrderFilterButton" onAction="#handleApplyOrderFilter" style="-fx-background-color: #007bff; -fx-text-fill: white;" text="اعمال فیلتر" />
                                          <Button fx:id="clearOrderFilterButton" onAction="#handleClearOrderFilter" style="-fx-background-color: #6c757d; -fx-text-fill: white;" text="پاک کردن" />
                                       </children>
                                    </HBox>
                                 </children>
                              </GridPane>
                           </children>
                           <padding>
                              <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                           </padding>
                        </VBox>
                        
                        <!-- Statistics Section -->
                        <HBox spacing="20.0">
                           <children>
                              <VBox alignment="CENTER" spacing="5.0" style="-fx-background-color: #e3f2fd; -fx-padding: 15; -fx-border-radius: 5; -fx-background-radius: 5;" HBox.hgrow="ALWAYS">
                                 <children>
                                    <Label text="تعداد کل سفارشات">
                                       <font>
                                          <Font size="14.0" />
                                       </font>
                                    </Label>
                                    <Label fx:id="totalOrdersLabel" text="0 سفارش">
                                       <font>
                                          <Font name="System Bold" size="18.0" />
                                       </font>
                                    </Label>
                                 </children>
                              </VBox>
                              <VBox alignment="CENTER" spacing="5.0" style="-fx-background-color: #e8f5e9; -fx-padding: 15; -fx-border-radius: 5; -fx-background-radius: 5;" HBox.hgrow="ALWAYS">
                                 <children>
                                    <Label text="مجموع خرید">
                                       <font>
                                          <Font size="14.0" />
                                       </font>
                                    </Label>
                                    <Label fx:id="totalSpentLabel" text="0 تومان">
                                       <font>
                                          <Font name="System Bold" size="18.0" />
                                       </font>
                                    </Label>
                                 </children>
                              </VBox>
                           </children>
                        </HBox>
                        
                        <!-- Orders Table -->
                        <TableView fx:id="ordersTable" VBox.vgrow="ALWAYS">
                           <columns>
                              <TableColumn fx:id="orderIdColumn" prefWidth="100.0" text="شماره سفارش" />
                              <TableColumn fx:id="orderDateColumn" prefWidth="150.0" text="تاریخ" />
                              <TableColumn fx:id="restaurantColumn" prefWidth="200.0" text="رستوران" />
                              <TableColumn fx:id="totalAmountColumn" prefWidth="120.0" text="مبلغ کل" />
                              <TableColumn fx:id="orderStatusColumn" prefWidth="120.0" text="وضعیت" />
                              <TableColumn fx:id="orderActionsColumn" prefWidth="250.0" text="عملیات" />
                           </columns>
                        </TableView>
                     </children>
                     <padding>
                        <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                     </padding>
                  </VBox>
               </content>
            </Tab>
            
            <!-- Transactions Tab -->
            <Tab fx:id="transactionsTab" text="تاریخچه مالی">
               <content>
                  <VBox spacing="15.0">
                     <children>
                        <!-- Transaction Filters -->
                        <HBox spacing="15.0" alignment="CENTER_LEFT">
                           <children>
                              <Label text="نوع تراکنش:" />
                              <ComboBox fx:id="transactionTypeFilter" prefWidth="150.0" />
                              <Label text="از تاریخ:" />
                              <DatePicker fx:id="transactionStartDate" prefWidth="150.0" />
                              <Label text="تا تاریخ:" />
                              <DatePicker fx:id="transactionEndDate" prefWidth="150.0" />
                              <Region HBox.hgrow="ALWAYS" />
                              <Button fx:id="downloadTransactionReportButton" onAction="#handleDownloadTransactionReport" style="-fx-background-color: #28a745; -fx-text-fill: white;" text="دانلود گزارش" />
                           </children>
                        </HBox>
                        
                        <!-- Transactions Table -->
                        <TableView fx:id="transactionsTable" VBox.vgrow="ALWAYS">
                           <columns>
                              <TableColumn fx:id="transactionIdColumn" prefWidth="100.0" text="شماره تراکنش" />
                              <TableColumn fx:id="transactionDateColumn" prefWidth="150.0" text="تاریخ" />
                              <TableColumn fx:id="transactionTypeColumn" prefWidth="120.0" text="نوع" />
                              <TableColumn fx:id="amountColumn" prefWidth="120.0" text="مبلغ" />
                              <TableColumn fx:id="descriptionColumn" prefWidth="250.0" text="توضیحات" />
                              <TableColumn fx:id="balanceAfterColumn" prefWidth="150.0" text="موجودی پس از تراکنش" />
                           </columns>
                        </TableView>
                     </children>
                     <padding>
                        <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                     </padding>
                  </VBox>
               </content>
            </Tab>
            
            <!-- Favorites Tab -->
            <Tab fx:id="favoritesTab" text="علاقه‌مندی‌ها">
               <content>
                  <VBox spacing="20.0">
                     <children>
                        <!-- Favorite Restaurants Section -->
                        <VBox spacing="10.0" style="-fx-background-color: white; -fx-border-color: #dee2e6; -fx-border-radius: 5; -fx-background-radius: 5;" VBox.vgrow="ALWAYS">
                           <children>
                              <HBox alignment="CENTER_LEFT">
                                 <children>
                                    <Label text="رستوران‌های مورد علاقه">
                                       <font>
                                          <Font name="System Bold" size="16.0" />
                                       </font>
                                    </Label>
                                    <Region HBox.hgrow="ALWAYS" />
                                    <Label fx:id="favoriteRestaurantsCountLabel" text="0" style="-fx-background-color: #007bff; -fx-text-fill: white; -fx-padding: 5 10; -fx-background-radius: 15;" />
                                 </children>
                              </HBox>
                              <ListView fx:id="favoriteRestaurantsList" maxHeight="200.0" minHeight="150.0" />
                           </children>
                           <padding>
                              <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                           </padding>
                        </VBox>
                        
                        <!-- Favorite Items Section -->
                        <VBox spacing="10.0" style="-fx-background-color: white; -fx-border-color: #dee2e6; -fx-border-radius: 5; -fx-background-radius: 5;" VBox.vgrow="ALWAYS">
                           <children>
                              <HBox alignment="CENTER_LEFT">
                                 <children>
                                    <Label text="غذاهای مورد علاقه">
                                       <font>
                                          <Font name="System Bold" size="16.0" />
                                       </font>
                                    </Label>
                                    <Region HBox.hgrow="ALWAYS" />
                                    <Label fx:id="favoriteItemsCountLabel" text="0" style="-fx-background-color: #28a745; -fx-text-fill: white; -fx-padding: 5 10; -fx-background-radius: 15;" />
                                 </children>
                              </HBox>
                              <ListView fx:id="favoriteItemsList" maxHeight="200.0" minHeight="150.0" />
                           </children>
                           <padding>
                              <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                           </padding>
                        </VBox>
                        
                        <!-- Action Buttons -->
                        <HBox alignment="CENTER" spacing="15.0">
                           <children>
                              <Button fx:id="removeFavoriteButton" disable="true" onAction="#handleRemoveFavorite" style="-fx-background-color: #dc3545; -fx-text-fill: white;" text="حذف از علاقه‌مندی‌ها" />
                              <Button fx:id="reorderFavoriteButton" disable="true" onAction="#handleReorderFavorite" style="-fx-background-color: #28a745; -fx-text-fill: white;" text="سفارش مجدد" />
                           </children>
                        </HBox>
                     </children>
                     <padding>
                        <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                     </padding>
                  </VBox>
               </content>
            </Tab>
            
            <!-- Settings Tab -->
            <Tab fx:id="settingsTab" text="تنظیمات">
               <content>
                  <ScrollPane fitToWidth="true">
                     <content>
                        <VBox spacing="20.0">
                           <children>
                              <!-- Notification Settings -->
                              <VBox spacing="10.0" style="-fx-background-color: white; -fx-border-color: #dee2e6; -fx-border-radius: 5; -fx-background-radius: 5;">
                                 <children>
                                    <Label text="تنظیمات اطلاع‌رسانی">
                                       <font>
                                          <Font name="System Bold" size="16.0" />
                                       </font>
                                    </Label>
                                    <VBox spacing="10.0">
                                       <children>
                                          <CheckBox fx:id="emailNotificationCheckBox" text="دریافت اطلاع‌رسانی از طریق ایمیل" />
                                          <CheckBox fx:id="smsNotificationCheckBox" text="دریافت اطلاع‌رسانی از طریق پیامک" />
                                          <CheckBox fx:id="pushNotificationCheckBox" text="دریافت اطلاع‌رسانی Push" />
                                       </children>
                                    </VBox>
                                 </children>
                                 <padding>
                                    <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                                 </padding>
                              </VBox>
                              
                              <!-- Language and Theme Settings -->
                              <VBox spacing="10.0" style="-fx-background-color: white; -fx-border-color: #dee2e6; -fx-border-radius: 5; -fx-background-radius: 5;">
                                 <children>
                                    <Label text="زبان و ظاهر">
                                       <font>
                                          <Font name="System Bold" size="16.0" />
                                       </font>
                                    </Label>
                                    <GridPane hgap="15.0" vgap="15.0">
                                       <columnConstraints>
                                          <ColumnConstraints hgrow="NEVER" minWidth="100.0" />
                                          <ColumnConstraints hgrow="ALWAYS" minWidth="200.0" />
                                       </columnConstraints>
                                       <children>
                                          <Label text="زبان:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                                          <ComboBox fx:id="languageComboBox" maxWidth="Infinity" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                                          
                                          <Label text="تم:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                                          <ComboBox fx:id="themeComboBox" maxWidth="Infinity" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                                       </children>
                                    </GridPane>
                                 </children>
                                 <padding>
                                    <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                                 </padding>
                              </VBox>
                              
                              <!-- Privacy Settings -->
                              <VBox spacing="10.0" style="-fx-background-color: white; -fx-border-color: #dee2e6; -fx-border-radius: 5; -fx-background-radius: 5;">
                                 <children>
                                    <Label text="حریم خصوصی">
                                       <font>
                                          <Font name="System Bold" size="16.0" />
                                       </font>
                                    </Label>
                                    <VBox spacing="10.0">
                                       <children>
                                          <CheckBox fx:id="shareDataCheckBox" text="اشتراک‌گذاری داده‌ها برای بهبود خدمات" />
                                          <CheckBox fx:id="showProfileCheckBox" text="نمایش پروفایل عمومی" />
                                       </children>
                                    </VBox>
                                 </children>
                                 <padding>
                                    <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                                 </padding>
                              </VBox>
                              
                              <!-- Action Buttons -->
                              <HBox alignment="CENTER" spacing="15.0">
                                 <children>
                                    <Button fx:id="saveSettingsButton" onAction="#handleSaveSettings" style="-fx-background-color: #28a745; -fx-text-fill: white;" text="ذخیره تنظیمات" />
                                    <Button fx:id="resetSettingsButton" onAction="#handleResetSettings" style="-fx-background-color: #6c757d; -fx-text-fill: white;" text="بازنشانی به پیش‌فرض" />
                                 </children>
                              </HBox>
                           </children>
                           <padding>
                              <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                           </padding>
                        </VBox>
                     </content>
                  </ScrollPane>
               </content>
            </Tab>
            
            <!-- Analytics Tab -->
            <Tab fx:id="analyticsTab" text="آمار و تحلیل">
               <content>
                  <ScrollPane fitToWidth="true">
                     <content>
                        <VBox spacing="20.0">
                           <children>
                              <!-- Time Range Selection -->
                              <HBox alignment="CENTER_LEFT" spacing="15.0">
                                 <children>
                                    <Label text="بازه زمانی:">
                                       <font>
                                          <Font size="14.0" />
                                       </font>
                                    </Label>
                                    <ComboBox fx:id="analyticsTimeRangeComboBox" prefWidth="200.0" />
                                 </children>
                              </HBox>
                              
                              <!-- Summary Statistics -->
                              <GridPane hgap="20.0" vgap="20.0">
                                 <columnConstraints>
                                    <ColumnConstraints hgrow="ALWAYS" percentWidth="25.0" />
                                    <ColumnConstraints hgrow="ALWAYS" percentWidth="25.0" />
                                    <ColumnConstraints hgrow="ALWAYS" percentWidth="25.0" />
                                    <ColumnConstraints hgrow="ALWAYS" percentWidth="25.0" />
                                 </columnConstraints>
                                 <children>
                                    <VBox alignment="CENTER" spacing="5.0" style="-fx-background-color: #e3f2fd; -fx-padding: 20; -fx-border-radius: 5; -fx-background-radius: 5;" GridPane.columnIndex="0">
                                       <children>
                                          <Label text="تعداد کل سفارشات">
                                             <font>
                                                <Font size="12.0" />
                                             </font>
                                          </Label>
                                          <Label fx:id="totalOrdersAnalyticsLabel" text="0">
                                             <font>
                                                <Font name="System Bold" size="24.0" />
                                             </font>
                                          </Label>
                                       </children>
                                    </VBox>
                                    <VBox alignment="CENTER" spacing="5.0" style="-fx-background-color: #e8f5e9; -fx-padding: 20; -fx-border-radius: 5; -fx-background-radius: 5;" GridPane.columnIndex="1">
                                       <children>
                                          <Label text="مجموع خرید">
                                             <font>
                                                <Font size="12.0" />
                                             </font>
                                          </Label>
                                          <Label fx:id="totalSpentAnalyticsLabel" text="0 تومان">
                                             <font>
                                                <Font name="System Bold" size="18.0" />
                                             </font>
                                          </Label>
                                       </children>
                                    </VBox>
                                    <VBox alignment="CENTER" spacing="5.0" style="-fx-background-color: #fff3cd; -fx-padding: 20; -fx-border-radius: 5; -fx-background-radius: 5;" GridPane.columnIndex="2">
                                       <children>
                                          <Label text="میانگین ماهانه">
                                             <font>
                                                <Font size="12.0" />
                                             </font>
                                          </Label>
                                          <Label fx:id="averageMonthlySpendLabel" text="0 تومان">
                                             <font>
                                                <Font name="System Bold" size="18.0" />
                                             </font>
                                          </Label>
                                       </children>
                                    </VBox>
                                    <VBox alignment="CENTER" spacing="5.0" style="-fx-background-color: #f8d7da; -fx-padding: 20; -fx-border-radius: 5; -fx-background-radius: 5;" GridPane.columnIndex="3">
                                       <children>
                                          <Label text="پرسفارش‌ترین رستوران">
                                             <font>
                                                <Font size="12.0" />
                                             </font>
                                          </Label>
                                          <Label fx:id="topRestaurantLabel" text="-">
                                             <font>
                                                <Font name="System Bold" size="16.0" />
                                             </font>
                                          </Label>
                                       </children>
                                    </VBox>
                                 </children>
                              </GridPane>
                              
                              <!-- Order Distribution Chart -->
                              <VBox spacing="10.0" style="-fx-background-color: white; -fx-border-color: #dee2e6; -fx-border-radius: 5; -fx-background-radius: 5;">
                                 <children>
                                    <Label text="توزیع سفارشات بر اساس نوع غذا">
                                       <font>
                                          <Font name="System Bold" size="16.0" />
                                       </font>
                                    </Label>
                                    <PieChart fx:id="orderDistributionChart" prefHeight="300.0" />
                                 </children>
                                 <padding>
                                    <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                                 </padding>
                              </VBox>
                              
                              <!-- Spending Trend Chart -->
                              <VBox spacing="10.0" style="-fx-background-color: white; -fx-border-color: #dee2e6; -fx-border-radius: 5; -fx-background-radius: 5;">
                                 <children>
                                    <Label text="روند خرید ماهانه">
                                       <font>
                                          <Font name="System Bold" size="16.0" />
                                       </font>
                                    </Label>
                                    <LineChart fx:id="spendingTrendChart" prefHeight="300.0">
                                       <xAxis>
                                          <CategoryAxis label="ماه" />
                                       </xAxis>
                                       <yAxis>
                                          <NumberAxis label="مبلغ (تومان)" />
                                       </yAxis>
                                    </LineChart>
                                 </children>
                                 <padding>
                                    <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                                 </padding>
                              </VBox>
                              
                              <!-- Top Food Item -->
                              <HBox alignment="CENTER" spacing="10.0" style="-fx-background-color: #e1f5fe; -fx-padding: 20; -fx-border-radius: 5; -fx-background-radius: 5;">
                                 <children>
                                    <Label text="محبوب‌ترین غذای شما:">
                                       <font>
                                          <Font size="16.0" />
                                       </font>
                                    </Label>
                                    <Label fx:id="topFoodItemLabel" text="-">
                                       <font>
                                          <Font name="System Bold" size="18.0" />
                                       </font>
                                    </Label>
                                 </children>
                              </HBox>
                           </children>
                           <padding>
                              <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                           </padding>
                        </VBox>
                     </content>
                  </ScrollPane>
               </content>
            </Tab>
         </tabs>
      </TabPane>
   </center>
   
   <bottom>
      <VBox>
         <children>
            <Separator />
            <HBox alignment="CENTER" spacing="20.0" style="-fx-background-color: #f8f9fa;">
               <children>
                  <Label fx:id="statusLabel" text="آماده">
                     <font>
                        <Font size="14.0" />
                     </font>
                  </Label>
                  <ProgressIndicator fx:id="loadingIndicator" maxHeight="20.0" maxWidth="20.0" visible="false" />
                  <ProgressBar fx:id="progressBar" prefWidth="200.0" visible="false" />
               </children>
               <padding>
                  <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
               </padding>
            </HBox>
         </children>
      </VBox>
   </bottom>
</BorderPane> 