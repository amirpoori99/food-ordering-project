# تنظیمات تست برای سیستم سفارش غذا
# این فایل برای محیط تست طراحی شده است

# ==================== تنظیمات پایگاه داده تست ====================
# استفاده از دیتابیس فایل برای تست‌ها تا داده‌ها ذخیره شوند
database.url=jdbc:sqlite:food_ordering_test.db?journal_mode=WAL&synchronous=NORMAL&busy_timeout=60000&cache_size=10000&temp_store=memory
database.driver=org.sqlite.JDBC
database.username=
database.password=

# ==================== تنظیمات Hibernate برای تست ====================
# تنظیمات خاص SQLite برای تست‌ها
spring.jpa.properties.hibernate.dialect=org.hibernate.community.dialect.SQLiteDialect
spring.jpa.properties.hibernate.hbm2ddl.auto=create-drop
spring.jpa.properties.hibernate.show_sql=false
spring.jpa.properties.hibernate.format_sql=false

# تنظیمات batch برای SQLite - غیرفعال کردن batch برای جلوگیری از lock
spring.jpa.properties.hibernate.jdbc.batch_size=0
spring.jpa.properties.hibernate.order_inserts=false
spring.jpa.properties.hibernate.order_updates=false
spring.jpa.properties.hibernate.batch_versioned_data=false

# تنظیمات connection برای SQLite - بهبود همزمانی
spring.jpa.properties.hibernate.connection.provider_disables_autocommit=false
spring.jpa.properties.hibernate.connection.isolation=1
spring.jpa.properties.hibernate.connection.autocommit=true

# تنظیمات cache برای تست
spring.jpa.properties.hibernate.cache.use_second_level_cache=false
spring.jpa.properties.hibernate.cache.use_query_cache=false

# تنظیمات connection pool برای تست - افزایش برای همزمانی بهتر
spring.jpa.properties.hibernate.connection.pool_size=5
spring.jpa.properties.hibernate.connection.max_pool_size=10
spring.jpa.properties.hibernate.connection.min_pool_size=1

# تنظیمات transaction برای تست
spring.jpa.properties.hibernate.transaction.jta.platform=org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform
spring.jpa.properties.hibernate.current_session_context_class=thread

# تنظیمات اضافی برای SQLite
spring.jpa.properties.hibernate.connection.characterEncoding=UTF-8
spring.jpa.properties.hibernate.connection.useUnicode=true

# ==================== تنظیمات لاگ برای تست ====================
logging.level.root=WARN
logging.level.com.myapp=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN

# ==================== تنظیمات امنیتی برای تست ====================
jwt.secret=TestSecretKeyForTestingOnlyDoNotUseInProduction
jwt.access-token.expiration=300000
jwt.refresh-token.expiration=3600000

# ==================== تنظیمات عملکرد برای تست ====================
cache.enabled=false
rate.limit.enabled=false

# ==================== تنظیمات سرور برای تست ====================
server.port=0 