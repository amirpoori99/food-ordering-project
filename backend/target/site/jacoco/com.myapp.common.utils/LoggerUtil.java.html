<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>LoggerUtil.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Food Ordering Backend</a> &gt; <a href="index.source.html" class="el_package">com.myapp.common.utils</a> &gt; <span class="el_source">LoggerUtil.java</span></div><h1>LoggerUtil.java</h1><pre class="source lang-java linenums">package com.myapp.common.utils;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;

/**
 * کلاس ابزاری برای logging پیشرفته با فرمت‌بندی مناسب و کنترل سطح
 * این کلاس مجموعه‌ای از متدهای کمکی برای log کردن انواع مختلف رویدادها فراهم می‌کند
 * شامل log های تست، عملکرد، امنیت، API و پایگاه داده
 */
<span class="nc" id="L14">public class LoggerUtil {</span>
    
    // فرمت timestamp برای log ها
<span class="fc" id="L17">    private static final DateTimeFormatter TIMESTAMP_FORMAT = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.SSS&quot;);</span>
    
    /**
     * ثبت پیشرفت تست با فرمت‌بندی مناسب
     * 
     * @param logger نمونه Logger
     * @param testName نام تست
     * @param message پیام
     */
    public static void logTestProgress(Logger logger, String testName, String message) {
<span class="fc" id="L27">        logger.info(&quot;🧪 [{}] {}&quot;, testName, message);</span>
<span class="fc" id="L28">    }</span>
    
    /**
     * ثبت موفقیت تست با emoji و فرمت‌بندی
     * 
     * @param logger نمونه Logger
     * @param testName نام تست
     * @param message پیام موفقیت
     */
    public static void logTestSuccess(Logger logger, String testName, String message) {
<span class="fc" id="L38">        logger.info(&quot;✅ [{}] {}&quot;, testName, message);</span>
<span class="fc" id="L39">    }</span>
    
    /**
     * ثبت شکست تست با emoji و فرمت‌بندی
     * 
     * @param logger نمونه Logger
     * @param testName نام تست
     * @param message پیام شکست
     */
    public static void logTestFailure(Logger logger, String testName, String message) {
<span class="fc" id="L49">        logger.error(&quot;❌ [{}] {}&quot;, testName, message);</span>
<span class="fc" id="L50">    }</span>
    
    /**
     * ثبت هشدار تست با emoji و فرمت‌بندی
     * 
     * @param logger نمونه Logger
     * @param testName نام تست
     * @param message پیام هشدار
     */
    public static void logTestWarning(Logger logger, String testName, String message) {
<span class="nc" id="L60">        logger.warn(&quot;⚠️ [{}] {}&quot;, testName, message);</span>
<span class="nc" id="L61">    }</span>
    
    /**
     * ثبت معیارهای عملکرد
     * 
     * @param logger نمونه Logger
     * @param operation نام عملیات
     * @param durationMs مدت زمان انجام (میلی‌ثانیه)
     */
    public static void logPerformance(Logger logger, String operation, long durationMs) {
<span class="fc" id="L71">        logger.info(&quot;⚡ Performance: {} completed in {}ms&quot;, operation, durationMs);</span>
<span class="fc" id="L72">    }</span>
    
    /**
     * ثبت معیارهای عملکرد با context اضافی
     * 
     * @param logger نمونه Logger
     * @param operation نام عملیات
     * @param durationMs مدت زمان انجام (میلی‌ثانیه)
     * @param context اطلاعات اضافی
     */
    public static void logPerformance(Logger logger, String operation, long durationMs, String context) {
<span class="fc" id="L83">        logger.info(&quot;⚡ Performance: {} completed in {}ms - {}&quot;, operation, durationMs, context);</span>
<span class="fc" id="L84">    }</span>
    
    /**
     * ثبت شروع عملیات کسب‌وکار
     * 
     * @param logger نمونه Logger
     * @param operation نام عملیات
     * @param params پارامترهای عملیات
     */
    public static void logOperationStart(Logger logger, String operation, Object... params) {
<span class="nc" id="L94">        logger.info(&quot;🔄 Starting: {} with params: {}&quot;, operation, java.util.Arrays.toString(params));</span>
<span class="nc" id="L95">    }</span>
    
    /**
     * ثبت تکمیل عملیات کسب‌وکار
     * 
     * @param logger نمونه Logger
     * @param operation نام عملیات
     * @param durationMs مدت زمان انجام (میلی‌ثانیه)
     */
    public static void logOperationComplete(Logger logger, String operation, long durationMs) {
<span class="nc" id="L105">        logger.info(&quot;✅ Completed: {} in {}ms&quot;, operation, durationMs);</span>
<span class="nc" id="L106">    }</span>
    
    /**
     * ثبت درخواست API
     * 
     * @param logger نمونه Logger
     * @param method HTTP method
     * @param path مسیر درخواست
     * @param userInfo اطلاعات کاربر
     */
    public static void logApiRequest(Logger logger, String method, String path, String userInfo) {
<span class="fc" id="L117">        logger.info(&quot;📥 API Request: {} {} - User: {}&quot;, method, path, userInfo);</span>
<span class="fc" id="L118">    }</span>
    
    /**
     * ثبت پاسخ API
     * 
     * @param logger نمونه Logger
     * @param method HTTP method
     * @param path مسیر درخواست
     * @param statusCode کد وضعیت HTTP
     * @param durationMs مدت زمان پردازش (میلی‌ثانیه)
     */
    public static void logApiResponse(Logger logger, String method, String path, int statusCode, long durationMs) {
<span class="pc bpc" id="L130" title="1 of 4 branches missed.">        String emoji = statusCode &lt; 300 ? &quot;✅&quot; : statusCode &lt; 500 ? &quot;⚠️&quot; : &quot;❌&quot;; // انتخاب emoji بر اساس status</span>
<span class="fc" id="L131">        logger.info(&quot;{} API Response: {} {} - Status: {} - Duration: {}ms&quot;, </span>
<span class="fc" id="L132">                   emoji, method, path, statusCode, durationMs);</span>
<span class="fc" id="L133">    }</span>
    
    /**
     * ثبت عملیات پایگاه داده
     * 
     * @param logger نمونه Logger
     * @param operation نوع عملیات (CREATE, READ, UPDATE, DELETE)
     * @param entity نام entity
     * @param id شناسه رکورد
     */
    public static void logDatabaseOperation(Logger logger, String operation, String entity, Object id) {
<span class="fc" id="L144">        logger.debug(&quot;💾 DB Operation: {} {} with ID: {}&quot;, operation, entity, id);</span>
<span class="fc" id="L145">    }</span>
    
    /**
     * ثبت رویداد امنیتی
     * 
     * @param logger نمونه Logger
     * @param event نوع رویداد امنیتی
     * @param userInfo اطلاعات کاربر
     * @param success موفقیت یا شکست عملیات
     */
    public static void logSecurityEvent(Logger logger, String event, String userInfo, boolean success) {
<span class="fc bfc" id="L156" title="All 2 branches covered.">        String emoji = success ? &quot;🔐&quot; : &quot;🚫&quot;;   // انتخاب emoji بر اساس نتیجه</span>
        
<span class="fc bfc" id="L158" title="All 2 branches covered.">        if (success) {</span>
<span class="fc" id="L159">            logger.info(&quot;{} Security: {} - User: {}&quot;, emoji, event, userInfo);</span>
        } else {
<span class="fc" id="L161">            logger.warn(&quot;{} Security: {} - User: {} - FAILED&quot;, emoji, event, userInfo);</span>
        }
<span class="fc" id="L163">    }</span>
    
    /**
     * ثبت خلاصه تست
     * 
     * @param logger نمونه Logger
     * @param testSuite نام مجموعه تست
     * @param total تعداد کل تست‌ها
     * @param passed تعداد تست‌های موفق
     * @param failed تعداد تست‌های ناموفق
     * @param totalDuration کل مدت زمان اجرا (میلی‌ثانیه)
     */
    public static void logTestSummary(Logger logger, String testSuite, int total, int passed, int failed, long totalDuration) {
<span class="nc" id="L176">        logger.info(&quot;📊 Test Summary: {} - Total: {}, Passed: {}, Failed: {}, Duration: {}ms&quot;, </span>
<span class="nc" id="L177">                   testSuite, total, passed, failed, totalDuration);</span>
<span class="nc" id="L178">    }</span>
    
    /**
     * ثبت جداکننده بخش برای خوانایی بهتر
     * 
     * @param logger نمونه Logger
     * @param title عنوان بخش
     */
    public static void logSeparator(Logger logger, String title) {
<span class="fc" id="L187">        String separator = &quot;=&quot;.repeat(60);                           // خط جداکننده</span>
<span class="fc" id="L188">        logger.info(&quot;\n{}\n{:^60}\n{}&quot;, separator, title, separator); // فرمت وسط‌چین</span>
<span class="fc" id="L189">    }</span>
    
    /**
     * ثبت زیربخش برای سازماندهی log ها
     * 
     * @param logger نمونه Logger
     * @param title عنوان زیربخش
     */
    public static void logSubsection(Logger logger, String title) {
<span class="fc" id="L198">        String separator = &quot;-&quot;.repeat(40);                     // خط جداکننده کوتاه‌تر</span>
<span class="fc" id="L199">        logger.info(&quot;\n{}\n{:^40}&quot;, separator, title);         // فرمت وسط‌چین</span>
<span class="fc" id="L200">    }</span>
    
    /**
     * ایجاد timestamp فرمت شده
     * 
     * @return timestamp فرمت شده
     */
    public static String getFormattedTimestamp() {
<span class="fc" id="L208">        return LocalDateTime.now().format(TIMESTAMP_FORMAT);</span>
    }
    
    /**
     * ثبت log با emoji و سطح سفارشی
     * 
     * @param logger نمونه Logger
     * @param emoji emoji مورد نظر
     * @param message پیام (با پشتیبانی از format)
     * @param params پارامترهای پیام
     */
    public static void logWithEmoji(Logger logger, String emoji, String message, Object... params) {
<span class="fc" id="L220">        logger.info(&quot;{} {}&quot;, emoji, String.format(message, params));</span>
<span class="fc" id="L221">    }</span>
    
    /**
     * ثبت خطا با context
     * 
     * @param logger نمونه Logger
     * @param operation نام عملیات که خطا در آن رخ داده
     * @param error استثنای رخ داده
     * @param context اطلاعات اضافی
     */
    public static void logError(Logger logger, String operation, Throwable error, Object... context) {
<span class="fc" id="L232">        logger.error(&quot;❌ Error in {}: {} - Context: {}&quot;, </span>
<span class="fc" id="L233">                    operation, error.getMessage(), java.util.Arrays.toString(context), error);</span>
<span class="fc" id="L234">    }</span>
    
    /**
     * ثبت اطلاعات تنظیمات
     * 
     * @param logger نمونه Logger
     * @param component نام کامپوننت
     * Log configuration info
     */
    public static void logConfiguration(Logger logger, String component, String key, Object value) {
<span class="fc" id="L244">        logger.info(&quot;⚙️ Config: {} - {}={}&quot;, component, key, value);</span>
<span class="fc" id="L245">    }</span>
    
    /**
     * Log startup information
     */
    public static void logStartup(Logger logger, String component, String version) {
<span class="fc" id="L251">        logger.info(&quot;🚀 Starting {} version {}&quot;, component, version);</span>
<span class="fc" id="L252">    }</span>
    
    /**
     * Log shutdown information
     */
    public static void logShutdown(Logger logger, String component) {
<span class="fc" id="L258">        logger.info(&quot;🛑 Shutting down {}&quot;, component);</span>
<span class="fc" id="L259">    }</span>
} 
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>